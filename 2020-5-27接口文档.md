## TPlanner接口文档

## 一、公用环境变量

{{base_url}} : http://47.102.155.74:8080

## 二. 状态码定义

- 操作成功
  - 1
- 操作失败
  - -1
- 用户未注册
  - 3001

## 三、用户登录模块

- URL：{{base_url}}/wx/login

- 请求方式：POST

- 请求格式：application/json

- 备注：用户登录成功后需要响应头拿取authorization字段并保存其值，并在后续每次请求头带上该字段

- 请求数据：

  ```json
  {
  	"openId": "jksasjdkasjdasd",
  	"name": "沛",
  	"wechatIcon": "http://thirdwx.qlogo.cn/mmopen/vi_32/LrNDia6COlhH146730AsLibyOKWjF4jPX3jnY718icRCLJrAUecJWK3icFw5vlb9PE9yJJ5rBKCJdmicUmibomYphRLg/132"
  }
  ```

- 返回响应数据：

  ```json
  {
      "message": "success",
    	"code": "1",
    	"data": {
      	"userId": 1,
      	"name": "沛",
     	 	"wechatIcon": 	"http://thirdwx.qlogo.cn/mmopen/vi_32/LrNDia6COlhH146730AsLibyOKWjF4jPX3jnY718icRC			LJrAUecJWK3icFw5vlb9PE9yJJ5rBKCJdmicUmibomYphRLg/132",
      "openId": null,
      "unionId": null
      }
  }
  ```



## 四、个人计划

### 4.1 获取个人计划

- URL：{{base_url}}/personal_plan/get

- 请求格式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```java
  {
      "message": "success",
      "code": "1",
      "data": [
          {
              "userId": 1,
              "planName": "controller测试用例",
              "planId": 1,
              "taskList": [
                  {
                      "taskId": 1,
                      "planId": 1,
                      "userId": null,
                      "taskName": "测试子任务1",
                      "lasting": 30,
                      "startTime": "2020-05-10 20:21:00",
                      "endTime": "2020-05-11 20:21:00",
                      "priority": 3,
                      "status": 1
                  },
                  {
                      "taskId": 2,
                      "planId": 1,
                      "userId": null,
                      "taskName": "测试子任务2",
                      "lasting": 40,
                      "startTime": "2020-05-10 16:21:00",
                      "endTime": "2020-05-11 20:21:00",
                      "priority": 3,
                      "status": 0
                  }
              ]
          },
          {
              "userId": 1,
              "planName": "测试",
              "planId": 2,
              "taskList": []
          }
      ]
  }
  ```

### 4.2 插入个人计划

- URL：{{base_url}}/personal_plan/set

- 请求格式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```java
  {
  	"planName":"controller测试用例",
  	"taskList":[
          {
              "taskName": "测试子任务1",
              "lasting": 30,
              "startTime": "2020-05-10 20:21:00",
              "endTime": "2020-05-11 20:21:00",
              "priority": 3,
              "status": 0
          },
          {
              "taskName": "测试子任务2",
              "lasting": 40,
              "startTime": "2020-05-10 16:21:00",
              "endTime": "2020-05-11 20:21:00",
              "priority": 3,
              "status": 0
          }
      ]
  }
  ```

- 响应数据：

  ```java
  {
      "message": "success",
      "code": "1",
      "data": null
  }
  ```

### 4.3 修改个人计划

- URL：{{base_url}}/personal_plan/update

- 请求格式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```java
  {
  	"planName": "修改controller测试用例",
          "planId": 8,
          "taskList": [
              {
                  "taskId": 11,
                  "planId": 8,
                  "taskName": "修改子任务1",
                  "lasting": 30,
                  "startTime": "2020-05-10 20:21:00",
                  "endTime": "2020-05-11 20:21:00",
                  "priority": 3,
                  "status": 0
              },
              {
                  "taskId": 12,
                  "planId": 8,
                  "taskName": "修改子任务2",
                  "lasting": 40,
                  "startTime": "2020-05-10 16:21:00",
                  "endTime": "2020-05-11 20:21:00",
                  "priority": 3,
                  "status": 0
              }
          ]
      
  }
  ```

- 响应数据：

  ```java
  {
      "message": "success",
      "code": "1",
      "data": null
  }
  ```

### 4.4 删除个人计划

- URL：{{base_url}}/personal_plan/update

- 请求格式：POST

- 请求格式：params

- 备注：请求头带上authorization字段

- 请求数据：planId

- 响应数据：

  ```java
  {
      "message": "success",
      "code": "1",
      "data": null
  }
  ```

### 4.5 删除个人计划子任务

- URL：{{base_url}}/personal_plan/delete_task

- 请求格式：POST

- 请求格式：params

- 备注：请求头带上authorization字段

- 请求数据：taskId

- 响应数据：

  ```java
  {
      "message": "success",
      "code": "1",
      "data": null	
  }
  ```

## 五、团队计划 

### 5.1 新增团队

- URL：{{base_url}}/group/addGroup

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
  	"groupName": "攻城狮",
  	"limit": 3
  }
  ```

- 响应数据：

  ```json
  {
    "message": "success",
    "code": "1",
    "data": {
      "groupId": 3,
      "groupName": "测试团队",
      "creatorId": 1,
      "groupPlanList": null,
      "groupMemberList": [],
      "limit": 6
    }
  }
  ```

### 5.2 更新团队成员列表（删除）

- URL：{{base_url}}/group/updateMember

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
  	"userId": 3,
  	"groupId": 2,
  	"type": "delete"
  }
  ```

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": {
          "groupId": 2,
          "groupName": "专业团队",
          "creatorId": null,
          "groupPlanList": [],
          "groupMemberList": [
              {
                  "userId": 1,
                  "name": "沛",
                  "wechatIcon": "http://thirdwx.qlogo.cn/mmopen/vi_32/LrNDia6COlhH146730AsLibyOKWjF4jPX3jnY718icRCLJrAUecJWK3icFw5vlb9PE9yJJ5rBKCJdmicUmibomYphRLg/132",
                  "openId": null,
                  "unionId": null
              }
          ],
          "limit": 6
      }
  }
  ```

### 5.3 更新团队成员列表（添加）

- URL：{{base_url}}/group/updateMember

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
  	"userId": 3,
  	"groupId": 2,
  	"type": "add"
  }
  ```

- 响应数据：

  ```
  {
      "message": "success",
      "code": "1",
      "data": {
          "groupId": 2,
          "groupName": "专业团队",
          "creatorId": null,
          "groupPlanList": [],
          "groupMemberList": [
              {
                  "userId": 1,
                  "name": "沛",
                  "wechatIcon": "http://thirdwx.qlogo.cn/mmopen/vi_32/LrNDia6COlhH146730AsLibyOKWjF4jPX3jnY718icRCLJrAUecJWK3icFw5vlb9PE9yJJ5rBKCJdmicUmibomYphRLg/132",
                  "openId": null,
                  "unionId": null
              },
              {
                  "userId": 3,
                  "name": "test2",
                  "wechatIcon": "test2",
                  "openId": null,
                  "unionId": null
              }
          ],
          "limit": 6
      }
  }
  ```

### 5.4 解散某个团队

- URL：{{base_url}}/group/deleteGroup?groupId=3

- 请求方式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```
  {
    	"message": "success",
    	"code": "1",
    	"data": "success"
  }
  ```

### 5.5 获取用户所在的团队列表

- URL：{{base_url}}/group/getGroup

- 请求方式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": [
          {
              "groupId": 1,
              "groupName": "攻城狮",
              "creatorId": 1,
              "groupPlanList": null,
              "groupMemberList": [
                  {
                      "userId": 1,
                      "name": "沛",
                      "wechatIcon": "http://thirdwx.qlogo.cn/mmopen/vi_32/LrNDia6COlhH146730AsLibyOKWjF4jPX3jnY718icRCLJrAUecJWK3icFw5vlb9PE9yJJ5rBKCJdmicUmibomYphRLg/132",
                      "openId": null,
                      "unionId": null
                  },
                  {
                      "userId": 2,
                      "name": "test",
                      "wechatIcon": "test",
                      "openId": null,
                      "unionId": null
                  },
                  {
                      "userId": 3,
                      "name": "test2",
                      "wechatIcon": "test2",
                      "openId": null,
                      "unionId": null
                  }
              ],
              "limit": 3
          },
          {
              "groupId": 2,
              "groupName": "专业团队",
              "creatorId": 1,
              "groupPlanList": null,
              "groupMemberList": [
                  {
                      "userId": 1,
                      "name": "沛",
                      "wechatIcon": "http://thirdwx.qlogo.cn/mmopen/vi_32/LrNDia6COlhH146730AsLibyOKWjF4jPX3jnY718icRCLJrAUecJWK3icFw5vlb9PE9yJJ5rBKCJdmicUmibomYphRLg/132",
                      "openId": null,
                      "unionId": null
                  }
              ],
              "limit": 6
          }
      ]
  }
  ```

  

### 5.6 获取某个团队的所有计划

- URL：{{base_url}}/group/getGroupPlan?groupId=3

- 请求方式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": [
          {
              "planId": 3,
              "userId": 1,
              "planName": "团队大计划测试",
              "taskList": [
                  {
                      "taskId": 3,
                      "planId": 3,
                      "userId": 1,
                      "taskName": "啦啦啦",
                      "lasting": 25,
                      "startTime": "2020-05-27 10:08:34",
                      "endTime": "2020-05-28 10:08:37",
                      "priority": 2,
                      "status": 0
                  },
                  {
                      "taskId": 5,
                      "planId": 3,
                      "userId": 2,
                      "taskName": "最后一天",
                      "lasting": 66,
                      "startTime": "2020-05-20 10:16:14",
                      "endTime": "2020-05-27 10:16:18",
                      "priority": 3,
                      "status": 0
                  }
              ],
              "type": 1
          },
          {
              "planId": 4,
              "userId": 2,
              "planName": "嘿嘿要加油哦！",
              "taskList": [
                  {
                      "taskId": 4,
                      "planId": 4,
                      "userId": 2,
                      "taskName": "呦呦呦",
                      "lasting": 40,
                      "startTime": "2020-05-18 10:11:18",
                      "endTime": "2020-05-28 10:11:14",
                      "priority": 1,
                      "status": 0
                  }
              ],
              "type": 1
          }
      ]
  }
  ```

### 5.7 添加团队计划

- URL：{{base_url}}/group/addGroupPlan

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
  	"planName": "新增计划",
      //type表示团队id
  	"type": 2,
  	"taskList": [
                  {
                      "userId": 1,
                      "taskName": "啦啦啦呜呜呜",
                      "lasting": 25,
                      "startTime": "2020-05-27 10:08:34",
                      "endTime": "2020-05-28 10:08:37",
                      "priority": 3,
                      "status": 0
                  },
                  {
                      "userId": 2,
                      "taskName": "最后一天.....",
                      "lasting": 88,
                      "startTime": "2020-05-20 10:16:14",
                      "endTime": "2020-05-27 10:16:18",
                      "priority": 3,
                      "status": 0
                  }
              ]
  }
  ```

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": {
          "userId": 1,
          "planName": "新增计划",
          "planId": 7,
          "type": 2,
          "taskList": [
              {
                  "taskId": 8,
                  "planId": 7,
                  "userId": 1,
                  "taskName": "啦啦啦呜呜呜",
                  "lasting": 25,
                  "startTime": "2020-05-27 10:08:34",
                  "endTime": "2020-05-28 10:08:37",
                  "priority": 3,
                  "status": 0
              },
              {
                  "taskId": 9,
                  "planId": 7,
                  "userId": 1,
                  "taskName": "最后一天.....",
                  "lasting": 88,
                  "startTime": "2020-05-20 10:16:14",
                  "endTime": "2020-05-27 10:16:18",
                  "priority": 3,
                  "status": 0
              }
          ]
      }
  }
  ```

### 5.8 修改团队计划

- URL：{{base_url}}/group/updateGroupPlan

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
      //type代表团队id
  	"type": 2,
  	"planId": 7,
  	"planName": "修改啦",
      //注意：此处的taskList是改计划中所有的task,在请求成功后会返回该大计划中所有的task
  	"taskList": [
              {
                  "taskId": 8,
                  "planId": 7,
                  "userId": 1,
                  "taskName": "呜",
                  "lasting": 25,
                  "startTime": "2020-05-27 10:08:34",
                  "endTime": "2020-05-28 10:08:37",
                  "priority": 3,
                  "status": 0
              },
              {
                  "taskId": 9,
                  "planId": 7,
                  "userId": 1,
                  "taskName": "last",
                  "lasting": 88,
                  "startTime": "2020-05-20 10:16:14",
                  "endTime": "2020-05-27 10:16:18",
                  "priority": 3,
                  "status": 0
              }
          ]
  }
  ```

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": {
          "userId": 1,
          "planName": "修改啦",
          "planId": 7,
          "type": 2,
          "taskList": [
              {
                  "taskId": 8,
                  "planId": 7,
                  "userId": 1,
                  "taskName": "呜",
                  "lasting": 25,
                  "startTime": "2020-05-27 10:08:34",
                  "endTime": "2020-05-28 10:08:37",
                  "priority": 3,
                  "status": 0
              },
              {
                  "taskId": 9,
                  "planId": 7,
                  "userId": 1,
                  "taskName": "last",
                  "lasting": 88,
                  "startTime": "2020-05-20 10:16:14",
                  "endTime": "2020-05-27 10:16:18",
                  "priority": 3,
                  "status": 0
              }
          ]
      }
  }
  ```

### 5.9 删除团队计划中的某个子任务

- URL：{{base_url}}/group/deleteGroupTask?taskId=9

- 请求方式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": true
  }
  ```

### 5.10 删除团队计划中的某个大计划

- URL：{{base_url}}/group/deleteGroupPlan?planId=7

- 请求方式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": true
  }
  ```

  

## 六、日程表

### 6.1 修改子任务状态

- URL：{{base_url}}/schedule/updateTaskStatus

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
  	"taskId": 1,
      //status为1代表已完成，0代表未完成
  	"status": 1
  }
  ```

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": {
          "taskId": 1,
          "planId": null,
          "userId": null,
          "taskName": null,
          "lasting": null,
          "startTime": null,
          "endTime": null,
          "priority": null,
          "status": 1
      }
  }
  ```


### 6.2 获取当天排序的计划安排

- URL：{{base_url}}/schedule/sortTask

- 请求方式：POST

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：

  ```json
  {
  	"algorithm": 1,(1代表短作业、2代表长作业、3代表优先级)
  	"date": "2020-05-10 00:00:00"
  }
  ```

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": [
          {
              "taskId": 2,
              "planId": null,
              "userId": null,
              "taskName": "测试子任务2",
              "lasting": 40,
              "startTime": "2020-05-10 16:21:00",
              "endTime": "2020-05-11 20:21:00",
              "priority": 3,
              "status": 0
          },
          {
              "taskId": 1,
              "planId": null,
              "userId": null,
              "taskName": "测试子任务1",
              "lasting": 30,
              "startTime": "2020-05-10 17:01:00",
              "endTime": "2020-05-11 20:21:00",
              "priority": 3,
              "status": 1
          }
      ]
  }
  ```

## 七、个人设置

### 7.1 修改个人昵称

- URL：{{base_url}}/setting/updateNickname?nickname=GP

- 请求方式：GET

- 请求格式：application/json

- 备注：请求头带上authorization字段

- 请求数据：无

- 响应数据：

  ```json
  {
      "message": "success",
      "code": "1",
      "data": null
  }
  ```

